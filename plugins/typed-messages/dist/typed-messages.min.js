!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("typed-messages",t):((e=e||self).AV=e.AV||{},e.AV.initTypedMessages=t())}(this,(function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var r=t((function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}));e(r);var o=t((function(e){var t=r.default;e.exports=function(e,r){if("object"!==t(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,r||"default");if("object"!==t(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}));e(o);var n=t((function(e){var t=r.default;e.exports=function(e){var r=o(e,"string");return"symbol"===t(r)?r:String(r)},e.exports.__esModule=!0,e.exports.default=e.exports}));e(n);var i=e(t((function(e){e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports}))),s=e(t((function(e){function t(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}e.exports=function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}))),a=t((function(e){function t(r,o){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,o)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}));e(a);var u=e(t((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports})));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t){var r=function(e){var t=e.AV,r=e.IM,o=function(e){function o(r){var o;if(!(r instanceof t.File))throw new TypeError("file must be an AV.File");if("string"!=typeof r.id)throw new Error("file must be saved before used to create a Message");return(o=e.call(this)||this)._file=r,o._lcfile={objId:r.id,url:r.url(),metaData:Object.assign(r.metaData()||{},{name:r.name()})},o}u(o,e);var n=o.prototype;return n.getFile=function(){return this._file},n.toJSON=function(){return c(c({},e.prototype.toJSON.call(this)),{},{file:this.getFile().toJSON()})},o._parseFileFromRawData=function(e){if(!e||!e._lcfile)throw new Error("malformed FileMessage content");var r=e._lcfile.objId;"string"!=typeof r&&(r="");var o=t.File.createWithoutData(r);return o.attributes=o.attributes||{},o._url=e._lcfile.url,o.attributes.url=o._url,o._metaData=e._lcfile.metaData||{},o.attributes.metaData=o._metaData,e._lcfile.metaData&&(o._name=e._lcfile.metaData.name,o.attributes.name=o._name),o},o.parse=function(e,t){var o=this._parseFileFromRawData(e);return r.TypedMessage.parse(e,t||new this(o))},s(o,[{key:"summary",get:function(){return"[".concat(this.constructor._summaryType,"] ").concat(this._file.name()||"").trim()}}]),o}(r.TypedMessage);return o._summaryType="文件",r.messageType(-6)(o),r.messageField("_lcfile")(o),r.IE10Compatible(o),o}({AV:e,IM:t}),o=function(e){var t=e.FileMessage,r=e.IM,o=function(e){function t(){return e.apply(this,arguments)||this}return u(t,e),t}(t);return o._summaryType="图片",r.messageType(-2)(o),r.IE10Compatible(o),o}({FileMessage:r,IM:t}),n=function(e){var t=e.FileMessage,r=e.IM,o=function(e){function t(){return e.apply(this,arguments)||this}return u(t,e),t}(t);return o._summaryType="语音",r.messageType(-3)(o),r.IE10Compatible(o),o}({FileMessage:r,IM:t}),i=function(e){var t=e.FileMessage,r=e.IM,o=function(e){function t(){return e.apply(this,arguments)||this}return u(t,e),t}(t);return o._summaryType="视频",r.messageType(-4)(o),r.IE10Compatible(o),o}({FileMessage:r,IM:t}),a=function(e){var t=e.AV,r=e.IM,o=function(e){function o(r){var o;if(!(r instanceof t.GeoPoint))throw new TypeError("geoPoint must be an AV.GeoPoint");(o=e.call(this)||this)._geoPoint=r;var n=r.latitude,i=r.longitude;return o._lcloc={latitude:n,longitude:i},o}u(o,e);var n=o.prototype;return n.getLocation=function(){return this._geoPoint},n.toJSON=function(){return f(f({},e.prototype.toJSON.call(this)),{},{location:this.getLocation().toJSON()})},o.parse=function(e,o){var n=e._lcloc,i=n.latitude,s=n.longitude,a=new t.GeoPoint({latitude:i,longitude:s});return r.TypedMessage.parse(e,o||new this(a))},s(o,[{key:"summary",get:function(){return"[位置] ".concat(this.text||"").trim()}}]),o}(r.TypedMessage);return r.messageType(-5)(o),r.messageField("_lcloc")(o),r.IE10Compatible(o),o}({AV:e,IM:t});return{TypedMessagesPlugin:{name:"leancloud-realtime-plugin-typed-messages",messageClasses:[r,o,n,i,a]},FileMessage:r,ImageMessage:o,AudioMessage:n,VideoMessage:i,LocationMessage:a}}return"undefined"!=typeof window&&window.AV&&Object.assign(window.AV,y(window.AV,window.AV)),y}));
//# sourceMappingURL=typed-messages.min.js.map
