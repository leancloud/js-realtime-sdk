{"version":3,"file":"typed-messages.js","sources":["../../../node_modules/@babel/runtime/helpers/typeof.js","../../../node_modules/@babel/runtime/helpers/toPrimitive.js","../../../node_modules/@babel/runtime/helpers/toPropertyKey.js","../../../node_modules/@babel/runtime/helpers/defineProperty.js","../../../node_modules/@babel/runtime/helpers/createClass.js","../../../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../../node_modules/@babel/runtime/helpers/inheritsLoose.js","../src/file-message.js","../src/image-message.js","../src/audio-message.js","../src/video-message.js","../src/location-message.js","../src/index.js"],"sourcesContent":["function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}\nmodule.exports = _inheritsLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","export default function createFileMessageClass({ AV, IM }) {\n  class FileMessage extends IM.TypedMessage {\n    /**\n     * @extends TypedMessage\n     * @param  {AV.File} file LeanCloud 存储 SDK 中的 AV.File 实例，且必须是已经保存到服务端上的 File 实例\n     * （如果是刚刚创建的，必须 save 后才能用于创建 FileMessage）\n     */\n    constructor(file) {\n      if (!(file instanceof AV.File)) {\n        throw new TypeError('file must be an AV.File');\n      }\n      if (typeof file.id !== 'string') {\n        throw new Error('file must be saved before used to create a Message');\n      }\n      super();\n      this._file = file;\n      this._lcfile = {\n        objId: file.id,\n        url: file.url(),\n        metaData: Object.assign(file.metaData() || {}, {\n          name: file.name(),\n        }),\n      };\n    }\n\n    /**\n     * 在客户端需要以文本形式展示该消息时显示的文案，格式为 <code>[类型] file.name()</code>\n     * @type {String}\n     * @readonly\n     */\n    get summary() {\n      return `[${this.constructor._summaryType}] ${this._file.name() ||\n        ''}`.trim();\n    }\n\n    /**\n     * 获得 file 对象\n     * @return {AV.File}\n     */\n    getFile() {\n      return this._file;\n    }\n\n    toJSON() {\n      return {\n        ...super.toJSON(),\n        file: this.getFile().toJSON(),\n      };\n    }\n\n    static _parseFileFromRawData(data) {\n      if (!(data && data._lcfile)) {\n        throw new Error('malformed FileMessage content');\n      }\n      let id = data._lcfile.objId;\n      if (typeof id !== 'string') {\n        id = '';\n      }\n      const file = AV.File.createWithoutData(id);\n      file.attributes = file.attributes || {};\n      file._url = data._lcfile.url;\n      file.attributes.url = file._url;\n      file._metaData = data._lcfile.metaData || {};\n      file.attributes.metaData = file._metaData;\n      if (data._lcfile.metaData) {\n        file._name = data._lcfile.metaData.name;\n        file.attributes.name = file._name;\n      }\n      return file;\n    }\n\n    static parse(json, message) {\n      const file = this._parseFileFromRawData(json);\n      return IM.TypedMessage.parse(json, message || new this(file));\n    }\n  }\n\n  FileMessage._summaryType = '文件';\n\n  /**\n   * @name TYPE\n   * @memberof FileMessage\n   * @type Number\n   * @static\n   * @const\n   */\n  IM.messageType(-6)(FileMessage);\n  IM.messageField('_lcfile')(FileMessage);\n  IM.IE10Compatible(FileMessage);\n\n  return FileMessage;\n}\n","export default function createImageMessageClass({ FileMessage, IM }) {\n  /**\n   * 构造方法参数同 {@link FileMessage}\n   *\n   * @extends FileMessage\n   */\n  class ImageMessage extends FileMessage {}\n  ImageMessage._summaryType = '图片';\n\n  /**\n   * @name TYPE\n   * @memberof ImageMessage\n   * @type Number\n   * @static\n   * @const\n   */\n  IM.messageType(-2)(ImageMessage);\n  IM.IE10Compatible(ImageMessage);\n\n  return ImageMessage;\n}\n","export default function createAudioMessageClass({ FileMessage, IM }) {\n  /**\n   * 构造方法参数同 {@link FileMessage}\n   *\n   * @extends FileMessage\n   */\n  class AudioMessage extends FileMessage {}\n  AudioMessage._summaryType = '语音';\n\n  /**\n   * @name TYPE\n   * @memberof AudioMessage\n   * @type Number\n   * @static\n   * @const\n   */\n  IM.messageType(-3)(AudioMessage);\n  IM.IE10Compatible(AudioMessage);\n\n  return AudioMessage;\n}\n","export default function createVideoMessageClass({ FileMessage, IM }) {\n  /**\n   * 构造方法参数同 {@link FileMessage}\n   *\n   * @extends FileMessage\n   */\n  class VideoMessage extends FileMessage {}\n  VideoMessage._summaryType = '视频';\n\n  /**\n   * @name TYPE\n   * @memberof VideoMessage\n   * @type Number\n   * @static\n   * @const\n   */\n  IM.messageType(-4)(VideoMessage);\n  IM.IE10Compatible(VideoMessage);\n\n  return VideoMessage;\n}\n","export default function createLocationMessageClass({ AV, IM }) {\n  class LocationMessage extends IM.TypedMessage {\n    /**\n     * @extends TypedMessage\n     * @param  {AV.GeoPoint} geoPoint LeanCloud 存储 SDK 中的 AV.GeoPoint 实例\n     */\n    constructor(geoPoint) {\n      if (!(geoPoint instanceof AV.GeoPoint)) {\n        throw new TypeError('geoPoint must be an AV.GeoPoint');\n      }\n      super();\n      this._geoPoint = geoPoint;\n      const { latitude, longitude } = geoPoint;\n      this._lcloc = { latitude, longitude };\n    }\n\n    /**\n     * 在客户端需要以文本形式展示该消息时显示的文案，格式为 <code>[位置] message.text</code>\n     * @type {String}\n     * @readonly\n     */\n    get summary() {\n      return `[位置] ${this.text || ''}`.trim();\n    }\n\n    /**\n     * 获得 geoPoint 对象\n     * @return {AV.GeoPoint}\n     */\n    getLocation() {\n      return this._geoPoint;\n    }\n\n    toJSON() {\n      return {\n        ...super.toJSON(),\n        location: this.getLocation().toJSON(),\n      };\n    }\n\n    static parse(json, message) {\n      const { latitude, longitude } = json._lcloc;\n      const geoPoint = new AV.GeoPoint({ latitude, longitude });\n      return IM.TypedMessage.parse(json, message || new this(geoPoint));\n    }\n  }\n\n  /**\n   * @name TYPE\n   * @memberof LocationMessage\n   * @type Number\n   * @static\n   * @const\n   */\n  IM.messageType(-5)(LocationMessage);\n  IM.messageField('_lcloc')(LocationMessage);\n  IM.IE10Compatible(LocationMessage);\n\n  return LocationMessage;\n}\n","/* global window */\n\n/** @module leancloud-realtime-plugin-typed-messages */\n\nimport createFileMessageClass from './file-message';\nimport createImageMessageClass from './image-message';\nimport createAudioMessageClass from './audio-message';\nimport createVideoMessageClass from './video-message';\nimport createLocationMessageClass from './location-message';\nimport { name } from '../package.json';\n\n/**\n * 初始化 TypedMessages 插件，使用后可支持接收 LeanCloud 提供的富媒体类型的消息\n * @example\n * const { TypedMessagesPlugin } = initPlugin(AV, Rtm);\n * const realtime = new Realtime({\n *   appId: appId,\n *   appKey: appKey,\n *   server: server,\n *   plugins: TypedMessagesPlugin,\n * });\n */\nexport default function initPlugin(AV, IM) {\n  /**\n   * @see FileMessage\n   */\n  const FileMessage = createFileMessageClass({ AV, IM });\n  /**\n   * @see ImageMessage\n   */\n  const ImageMessage = createImageMessageClass({ FileMessage, IM });\n  /**\n   * @see AudioMessage\n   */\n  const AudioMessage = createAudioMessageClass({ FileMessage, IM });\n  /**\n   * @see VideoMessage\n   */\n  const VideoMessage = createVideoMessageClass({ FileMessage, IM });\n  /**\n   * @see LocationMessage\n   */\n  const LocationMessage = createLocationMessageClass({ AV, IM });\n\n  const TypedMessagesPlugin = {\n    name,\n    messageClasses: [\n      FileMessage,\n      ImageMessage,\n      AudioMessage,\n      VideoMessage,\n      LocationMessage,\n    ],\n  };\n\n  return {\n    TypedMessagesPlugin,\n    FileMessage,\n    ImageMessage,\n    AudioMessage,\n    VideoMessage,\n    LocationMessage,\n  };\n}\n\n// 浏览器环境下自动初始化\nif (typeof window !== 'undefined' && window.AV) {\n  Object.assign(window.AV, initPlugin(window.AV, window.AV));\n}\n"],"names":["require$$0","createFileMessageClass","_ref","AV","IM","FileMessage","_IM$TypedMessage","_inheritsLoose","file","_this","File","TypeError","id","Error","call","_file","_lcfile","objId","url","metaData","Object","assign","name","_proto","prototype","getFile","toJSON","_objectSpread","_parseFileFromRawData","data","createWithoutData","attributes","_url","_metaData","_name","parse","json","message","TypedMessage","_createClass","key","get","concat","constructor","_summaryType","trim","messageType","messageField","IE10Compatible","createImageMessageClass","ImageMessage","_FileMessage","apply","arguments","createAudioMessageClass","AudioMessage","createVideoMessageClass","VideoMessage","createLocationMessageClass","LocationMessage","geoPoint","GeoPoint","_geoPoint","latitude","longitude","_lcloc","getLocation","location","_json$_lcloc","text","initPlugin","TypedMessagesPlugin","messageClasses","window"],"mappings":"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"}