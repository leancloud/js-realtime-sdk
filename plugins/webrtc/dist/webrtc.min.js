!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("leancloud-realtime")):"function"==typeof define&&define.amd?define("webrtc",["exports","leancloud-realtime"],t):t((e=e||self).AV=e.AV||{},e.AV)}(this,(function(e,t){"use strict";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function o(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var i=o((function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports}));r(i);var s=o((function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,s,a=[],c=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(u)throw o}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports}));r(s);var a=o((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports}));r(a);var c=o((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}));r(c);var u=o((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}));r(u);var l=r(o((function(e){e.exports=function(e,t){return i(e)||s(e,t)||c(e,t)||u()},e.exports.__esModule=!0,e.exports.default=e.exports}))),f=o((function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}));r(f);var p=o((function(e){var t=f.default;e.exports=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports}));r(p);var h=o((function(e){var t=f.default;e.exports=function(e){var n=p(e,"string");return"symbol"===t(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}));r(h);var d=r(o((function(e){e.exports=function(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports}))),v=o((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}));r(v);var _=r(o((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,v(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports}))),y=o((function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,o,i,s){var a=n?n+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,i),!0;case 6:return l.fn.call(l.context,t,r,o,i,s),!0}for(u=1,c=new Array(f-1);u<f;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var p,h=l.length;for(u=0;u<h;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),f){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,o);break;default:if(!c)for(p=1,c=new Array(f-1);p<f;p++)c[p-1]=arguments[p];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||r&&a.context!==r||s(this,i);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||o&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})),m=r(o((function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}))),b=o((function(e,t){var n;n={VERSION:"2.4.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(e,t){var r="string"==typeof e.initial?{state:e.initial}:e.initial,o=e.terminal||e.final,i=t||e.target||{},s=e.events||[],a=e.callbacks||{},c={},u={},l=function(e){var t=Array.isArray(e.from)?e.from:e.from?[e.from]:[n.WILDCARD];c[e.name]=c[e.name]||{};for(var r=0;r<t.length;r++)u[t[r]]=u[t[r]]||[],u[t[r]].push(e.name),c[e.name][t[r]]=e.to||t[r];e.to&&(u[e.to]=u[e.to]||[])};r&&(r.event=r.event||"startup",l({name:r.event,from:"none",to:r.state}));for(var f=0;f<s.length;f++)l(s[f]);for(var p in c)c.hasOwnProperty(p)&&(i[p]=n.buildEvent(p,c[p]));for(var p in a)a.hasOwnProperty(p)&&(i[p]=a[p]);return i.current="none",i.is=function(e){return Array.isArray(e)?e.indexOf(this.current)>=0:this.current===e},i.can=function(e){return!this.transition&&void 0!==c[e]&&(c[e].hasOwnProperty(this.current)||c[e].hasOwnProperty(n.WILDCARD))},i.cannot=function(e){return!this.can(e)},i.transitions=function(){return(u[this.current]||[]).concat(u[n.WILDCARD]||[])},i.isFinished=function(){return this.is(o)},i.error=e.error||function(e,t,n,r,o,i,s){throw s||i},i.states=function(){return Object.keys(u).sort()},r&&!r.defer&&i[r.event](),i},doCallback:function(e,t,r,o,i,s){if(t)try{return t.apply(e,[r,o,i].concat(s))}catch(t){return e.error(r,o,i,s,n.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",t)}},beforeAnyEvent:function(e,t,r,o,i){return n.doCallback(e,e.onbeforeevent,t,r,o,i)},afterAnyEvent:function(e,t,r,o,i){return n.doCallback(e,e.onafterevent||e.onevent,t,r,o,i)},leaveAnyState:function(e,t,r,o,i){return n.doCallback(e,e.onleavestate,t,r,o,i)},enterAnyState:function(e,t,r,o,i){return n.doCallback(e,e.onenterstate||e.onstate,t,r,o,i)},changeState:function(e,t,r,o,i){return n.doCallback(e,e.onchangestate,t,r,o,i)},beforeThisEvent:function(e,t,r,o,i){return n.doCallback(e,e["onbefore"+t],t,r,o,i)},afterThisEvent:function(e,t,r,o,i){return n.doCallback(e,e["onafter"+t]||e["on"+t],t,r,o,i)},leaveThisState:function(e,t,r,o,i){return n.doCallback(e,e["onleave"+r],t,r,o,i)},enterThisState:function(e,t,r,o,i){return n.doCallback(e,e["onenter"+o]||e["on"+o],t,r,o,i)},beforeEvent:function(e,t,r,o,i){if(!1===n.beforeThisEvent(e,t,r,o,i)||!1===n.beforeAnyEvent(e,t,r,o,i))return!1},afterEvent:function(e,t,r,o,i){n.afterThisEvent(e,t,r,o,i),n.afterAnyEvent(e,t,r,o,i)},leaveState:function(e,t,r,o,i){var s=n.leaveThisState(e,t,r,o,i),a=n.leaveAnyState(e,t,r,o,i);return!1!==s&&!1!==a&&(n.ASYNC===s||n.ASYNC===a?n.ASYNC:void 0)},enterState:function(e,t,r,o,i){n.enterThisState(e,t,r,o,i),n.enterAnyState(e,t,r,o,i)},buildEvent:function(e,t){return function(){var r=this.current,o=t[r]||(t[n.WILDCARD]!=n.WILDCARD?t[n.WILDCARD]:r)||r,i=Array.prototype.slice.call(arguments);if(this.transition)return this.error(e,r,o,i,n.Error.PENDING_TRANSITION,"event "+e+" inappropriate because previous transition did not complete");if(this.cannot(e))return this.error(e,r,o,i,n.Error.INVALID_TRANSITION,"event "+e+" inappropriate in current state "+this.current);if(!1===n.beforeEvent(this,e,r,o,i))return n.Result.CANCELLED;if(r===o)return n.afterEvent(this,e,r,o,i),n.Result.NOTRANSITION;var s=this;this.transition=function(){return s.transition=null,s.current=o,n.enterState(s,e,r,o,i),n.changeState(s,e,r,o,i),n.afterEvent(s,e,r,o,i),n.Result.SUCCEEDED},this.transition.cancel=function(){s.transition=null,n.afterEvent(s,e,r,o,i)};var a=n.leaveState(this,e,r,o,i);return!1===a?(this.transition=null,n.Result.CANCELLED):n.ASYNC===a?n.Result.PENDING:this.transition?this.transition():void 0}}},e.exports&&(t=e.exports=n),t.StateMachine=n})),C=(b.StateMachine,o((function(e,t){!function(t){var n=function(){},r=Object.prototype.hasOwnProperty,o=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=Object.keys||function(e){var t=[];for(var n in e)r.call(e,n)&&t.push(n);return t},s=function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);return e},a=Object.setPrototypeOf||s,c=Object.prototype.toString,u=Array.isArray||function(e){return"[object Array]"===c.call(e)},l=function(e){return"[object Function]"===c.call(e)},f=!0,p={toString:""};for(var h in p)p.hasOwnProperty(h)&&(f=!1);var d=f?["toString","valueOf"]:null;function v(e,t,r){for(var o,s,a=function(e){var t=i(e);if(f)for(var n,r=0;n=d[r++];)e.hasOwnProperty(n)&&t.push(n);return t}(r),c=0,u=a.length;c<u;)"__self"!==(o=a[c++])&&(s=r[o],l(s)&&(!s.prototype||!s.prototype.__self)&&s.toString().indexOf(".__base")>-1?t[o]=function(r,o){var i=e[r]?e[r]:"__constructor"===r?t.__self.__parent:n,s=function(){var e=this.__base;this.__base=s.__base;var t=o.apply(this,arguments);return this.__base=e,t};return s.__base=i,s}(o,s):t[o]=s)}function _(e,t){for(var n,r=1;n=e[r++];)t?l(n)?y.self(t,n.prototype,n):y.self(t,n):t=l(n)?y(e[0],n.prototype,n):y(e[0],n);return t||e[0]}function y(){var e=arguments,t=u(e[0]),r=t||l(e[0]),i=r?t?_(e[0]):e[0]:n,c=e[r?1:0]||{},f=e[r?2:1],p=c.__constructor||r&&i.prototype&&i.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:r?function(){return i.apply(this,arguments)}:function(){};if(!r)return p.prototype=c,p.prototype.__self=p.prototype.constructor=p,s(p,f);a(p,i),p.__parent=i;var h=i.prototype,d=p.prototype=o(h);return d.__self=d.constructor=p,c&&v(h,d,c),f&&v(i,p,f),p}y.self=function(){var e=arguments,t=u(e[0]),n=t?_(e[0],e[0][0]):e[0],r=e[1],o=e[2],i=n.prototype;return r&&v(i,i,r),o&&v(n,n,o),n};var m=!0;e.exports=y,m=!1,"object"==typeof modules&&"function"==typeof modules.define&&(modules.define("inherit",(function(e){e(y)})),m=!1),m&&(t.inherit=y)}(n)})));if(!t.TypedMessage)throw new Error("LeanCloud Realtime SDK not installed");var g,w=C(t.TypedMessage,{__constructor:function(e){this.__base(),this.payload=e}});w.sendOptions={transient:!0},t.messageField("payload")(w);var x,S,E,O,A=t.messageType(-102)(g=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t}(w))||g,T=t.messageType(-103)(x=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t}(w))||x,P=t.messageType(-104)(S=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t}(w))||S,I=t.messageType(-105)(E=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t}(w))||E,D=function(e){function t(t,n){var r;(r=e.call(this)||this)._setConversation(t),r._peerConnection=r._createPeerConnection(n),r._call=b.create({initial:"calling",events:[{name:"connect",from:"calling",to:"connected"},{name:"close",from:"connected",to:"closed"},{name:"cancel",from:"calling",to:"canceled"},{name:"refuse",from:"calling",to:"refused"}]}),r._promises={};var o=new Promise((function(e){r._promises.resolveStreamReady=e})),i=new Promise((function(e){r._promises.resolveAccept=e}));return Promise.all([o,i]).then((function(e){var t=l(e,1)[0];r._call.can("connect")&&(r._call.connect(),r.emit("connect",t))})),r}_(t,e);var n=t.prototype;return n.close=function(){var e=this;return Promise.resolve().then((function(){e._call.close(),e._destroyPeerConnection(),e._peerConnection.close(),e._destroy()}))},n._handleCloseEvent=function(){this._call.can("close")&&(this.close(),this.emit("close"))},n._setConversation=function(e){this._conversation&&this._conversation.off("message"),e&&(this._conversation=e,e.on("message",this._handleMessage.bind(this)))},n._destroy=function(){this._conversation.off("message")},n._createPeerConnection=function(e){var t=new RTCPeerConnection(e);return t.onicecandidate=this._handleICECandidateEvent.bind(this),t.onaddstream=this._handleAddStreamEvent.bind(this),t.onnremovestream=this._handleRemoveStreamEvent.bind(this),t.oniceconnectionstatechange=this._handleICEConnectionStateChangeEvent.bind(this),t.onsignalingstatechange=this._handleSignalingStateChangeEvent.bind(this),t},n._destroyPeerConnection=function(){var e=this._peerConnection;delete e.onaddstream,delete e.onremovestream,delete e.onnicecandidate,delete e.oniceconnectionstatechange,delete e.onsignalingstatechange},n._handleMessage=function(e){return e instanceof A?this._handleAnswer(e):e instanceof P?this._handleRefusal():e instanceof I?this._handleCancelation():e instanceof T&&this._handleICECandidate(e)},n._handleICECandidate=function(e){var t=new RTCIceCandidate(e.payload);this._peerConnection&&this._peerConnection.addIceCandidate(t).catch(console.error.bind(console))},n._handleICECandidateEvent=function(e){return!(!e.candidate||!this._conversation)&&this._conversation.send(new T(e.candidate)).catch(console.error.bind(console))},n._handleAddStreamEvent=function(e){this._promises.resolveStreamReady(e.stream)},n._handleRemoveStreamEvent=function(){this._handleCloseEvent()},n._handleICEConnectionStateChangeEvent=function(){switch(this._peerConnection.iceConnectionState){case"closed":case"failed":case"disconnected":this._handleCloseEvent()}},n._handleSignalingStateChangeEvent=function(){switch(this._peerConnection.signalingState){case"closed":this._handleCloseEvent()}},n._handleAnswer=function(){throw new Error("not implemented")},n._handleRefusal=function(){throw new Error("not implemented")},n._handleCancelation=function(){throw new Error("not implemented")},m(t,[{key:"state",get:function(){return this._call.current}}]),t}(y),R=function(e){function t(t,n,r){var o;return(o=e.call(this,n,r)||this).to=t,o}_(t,e);var n=t.prototype;return n._handleAnswer=function(e){var t=new RTCSessionDescription(e.payload);this._peerConnection.setRemoteDescription(t),this._promises.resolveAccept()},n._handleRefusal=function(){this._destroyPeerConnection(),this._call.refuse(),this.emit("refuse"),this._destroy()},n.cancel=function(){var e=this;return this._call.cancel(),this._conversation.send(new I).then((function(){return e._destroy()}))},n.close=function(){return this._call.can("cancel")?this.cancel():e.prototype.close.call(this)},t}(D),j=function(e){function t(t,n,r){var o;(o=e.call(this,n,r)||this).from=t.from;var i=new RTCSessionDescription(t.payload);return o._handleOfferPromise=o._peerConnection.setRemoteDescription(i),o}_(t,e);var n=t.prototype;return n.accept=function(e){var t=this;if(!e)throw new TypeError("a MediaStream instance is required to accept a call");return this._handleOfferPromise.then((function(){return t._peerConnection.addStream(e)})).then((function(){return t._peerConnection.createAnswer()})).then((function(e){return t._peerConnection.setLocalDescription(e)})).then((function(){return t._conversation.send(new A(t._peerConnection.localDescription))})).then((function(){return t._promises.resolveAccept()}))},n.refuse=function(){var e=this;return this._conversation.send(new P).then((function(){e._call.refuse(),e._destroy()}))},n._handleCancelation=function(){this._call.cancel(),this.emit("cancel"),this._destroy()},t}(D),N=t.messageType(-101)(O=function(e){function t(){return e.apply(this,arguments)||this}return _(t,e),t}(w))||O;function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var M={iceServers:[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302","stun:stun.ekiga.net","stun:stun.ideasip.com","stun:stun.rixtelecom.se","stun:stun.schlund.de","stun:stun.stunprotocol.org:3478","stun:stun.voiparound.com","stun:stun.voipbuster.com","stun:stun.voipstunt.com","stun:stun.voxgratia.org"]}]},k=function(e){function t(t,n){var r;if("string"!=typeof t)throw new TypeError("id is not a string");return(r=e.call(this)||this).id=t,r.options=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({RTCConfiguration:M},n),r}_(t,e);var n=t.prototype;return n._open=function(e,t){var n=this;return e.createIMClient(this.id,t,"webrtc").then((function(e){return n._imClient=e,n.id=e.id,e.on("message",(function(e,t){return e instanceof N&&n._handleOffer(e,t)})),e.on("conflict",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.emit.apply(n,["conflict"].concat(t))})),n}))},n.close=function(){return this._imClient.close()},n.call=function(e,t){var n=this;if("string"!=typeof e)throw new TypeError("target id is not a string");if(!t)throw new TypeError("a MediaStream instance is required to make a call");return this._imClient.ping([e]).then((function(r){if(!r.length)throw new Error("Call failed as ".concat(e," is not online"));var o=new R(e,null,n.options.RTCConfiguration),i=new Promise((function(e){o._peerConnection.onnegotiationneeded=e}));return o._peerConnection.addStream(t),i.then((function(){return Promise.all([n._imClient.createConversation({members:[e],unique:!0}),o._peerConnection.createOffer().then((function(e){o._peerConnection.setLocalDescription(e)}))])})).then((function(e){var t=l(e,1)[0];return o._setConversation(t),t.send(new N(o._peerConnection.localDescription))})).then((function(){return o}))}))},n._handleOffer=function(e,t){var n=new j(e,t,this.options.RTCConfiguration);this.emit("call",n)},t}(y),W={name:"leancloud-realtime-plugin-webrtc",messageClasses:[N,A,T,P,I],onRealtimeCreate:function(e){e.createWebRTCClient=function(t,n){return new k(t)._open(e,n)}}},V=!!(window.RTCPeerConnection&&window.RTCSessionDescription&&window.RTCIceCandidate);e.WebRTCPlugin=W,e.isWebRTCSupported=V,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=webrtc.min.js.map
