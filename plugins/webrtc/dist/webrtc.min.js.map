{"version":3,"file":"webrtc.min.js","sources":["../../../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../../../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../../../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../../../node_modules/@babel/runtime/helpers/nonIterableRest.js","../../../node_modules/@babel/runtime/helpers/slicedToArray.js","../../../node_modules/@babel/runtime/helpers/typeof.js","../../../node_modules/@babel/runtime/helpers/toPrimitive.js","../../../node_modules/@babel/runtime/helpers/toPropertyKey.js","../../../node_modules/@babel/runtime/helpers/defineProperty.js","../../../node_modules/@babel/runtime/helpers/setPrototypeOf.js","../../../node_modules/@babel/runtime/helpers/inheritsLoose.js","../../../node_modules/eventemitter3/index.js","../../../node_modules/@babel/runtime/helpers/createClass.js","../../../node_modules/javascript-state-machine/state-machine.js","../../../node_modules/inherit/lib/inherit.js","../src/realtime.js","../src/signalings/signaling.js","../src/signalings/answer.js","../src/signalings/ice-candidate.js","../src/signalings/refusal.js","../src/signalings/cancelation.js","../src/call/call.js","../src/call/call-state-machine.js","../src/call/outgoing-call.js","../src/call/incoming-call.js","../src/signalings/offer.js","../src/webrtc-client.js","../src/index.js"],"sourcesContent":["function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArrayLimit(arr, i) {\n  var _i = null == arr ? null : \"undefined\" != typeof Symbol && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (null != _i) {\n    var _s,\n      _e,\n      _x,\n      _r,\n      _arr = [],\n      _n = !0,\n      _d = !1;\n    try {\n      if (_x = (_i = _i.call(arr)).next, 0 === i) {\n        if (Object(_i) !== _i) return;\n        _n = !1;\n      } else for (; !(_n = (_s = _x.call(_i)).done) && (_arr.push(_s.value), _arr.length !== i); _n = !0);\n    } catch (err) {\n      _d = !0, _e = err;\n    } finally {\n      try {\n        if (!_n && null != _i[\"return\"] && (_r = _i[\"return\"](), Object(_r) !== _r)) return;\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}\nmodule.exports = _inheritsLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","/*\n\n  Javascript State Machine Library - https://github.com/jakesgordon/javascript-state-machine\n\n  Copyright (c) 2012, 2013, 2014, 2015, Jake Gordon and contributors\n  Released under the MIT license - https://github.com/jakesgordon/javascript-state-machine/blob/master/LICENSE\n\n*/\n\n(function () {\n\n  var StateMachine = {\n\n    //---------------------------------------------------------------------------\n\n    VERSION: \"2.4.0\",\n\n    //---------------------------------------------------------------------------\n\n    Result: {\n      SUCCEEDED:    1, // the event transitioned successfully from one state to another\n      NOTRANSITION: 2, // the event was successfull but no state transition was necessary\n      CANCELLED:    3, // the event was cancelled by the caller in a beforeEvent callback\n      PENDING:      4  // the event is asynchronous and the caller is in control of when the transition occurs\n    },\n\n    Error: {\n      INVALID_TRANSITION: 100, // caller tried to fire an event that was innapropriate in the current state\n      PENDING_TRANSITION: 200, // caller tried to fire an event while an async transition was still pending\n      INVALID_CALLBACK:   300 // caller provided callback function threw an exception\n    },\n\n    WILDCARD: '*',\n    ASYNC: 'async',\n\n    //---------------------------------------------------------------------------\n\n    create: function(cfg, target) {\n\n      var initial      = (typeof cfg.initial == 'string') ? { state: cfg.initial } : cfg.initial; // allow for a simple string, or an object with { state: 'foo', event: 'setup', defer: true|false }\n      var terminal     = cfg.terminal || cfg['final'];\n      var fsm          = target || cfg.target  || {};\n      var events       = cfg.events || [];\n      var callbacks    = cfg.callbacks || {};\n      var map          = {}; // track state transitions allowed for an event { event: { from: [ to ] } }\n      var transitions  = {}; // track events allowed from a state            { state: [ event ] }\n\n      var add = function(e) {\n        var from = Array.isArray(e.from) ? e.from : (e.from ? [e.from] : [StateMachine.WILDCARD]); // allow 'wildcard' transition if 'from' is not specified\n        map[e.name] = map[e.name] || {};\n        for (var n = 0 ; n < from.length ; n++) {\n          transitions[from[n]] = transitions[from[n]] || [];\n          transitions[from[n]].push(e.name);\n\n          map[e.name][from[n]] = e.to || from[n]; // allow no-op transition if 'to' is not specified\n        }\n        if (e.to)\n          transitions[e.to] = transitions[e.to] || [];\n      };\n\n      if (initial) {\n        initial.event = initial.event || 'startup';\n        add({ name: initial.event, from: 'none', to: initial.state });\n      }\n\n      for(var n = 0 ; n < events.length ; n++)\n        add(events[n]);\n\n      for(var name in map) {\n        if (map.hasOwnProperty(name))\n          fsm[name] = StateMachine.buildEvent(name, map[name]);\n      }\n\n      for(var name in callbacks) {\n        if (callbacks.hasOwnProperty(name))\n          fsm[name] = callbacks[name]\n      }\n\n      fsm.current     = 'none';\n      fsm.is          = function(state) { return Array.isArray(state) ? (state.indexOf(this.current) >= 0) : (this.current === state); };\n      fsm.can         = function(event) { return !this.transition && (map[event] !== undefined) && (map[event].hasOwnProperty(this.current) || map[event].hasOwnProperty(StateMachine.WILDCARD)); }\n      fsm.cannot      = function(event) { return !this.can(event); };\n      fsm.transitions = function()      { return (transitions[this.current] || []).concat(transitions[StateMachine.WILDCARD] || []); };\n      fsm.isFinished  = function()      { return this.is(terminal); };\n      fsm.error       = cfg.error || function(name, from, to, args, error, msg, e) { throw e || msg; }; // default behavior when something unexpected happens is to throw an exception, but caller can override this behavior if desired (see github issue #3 and #17)\n      fsm.states      = function() { return Object.keys(transitions).sort() };\n\n      if (initial && !initial.defer)\n        fsm[initial.event]();\n\n      return fsm;\n\n    },\n\n    //===========================================================================\n\n    doCallback: function(fsm, func, name, from, to, args) {\n      if (func) {\n        try {\n          return func.apply(fsm, [name, from, to].concat(args));\n        }\n        catch(e) {\n          return fsm.error(name, from, to, args, StateMachine.Error.INVALID_CALLBACK, \"an exception occurred in a caller-provided callback function\", e);\n        }\n      }\n    },\n\n    beforeAnyEvent:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onbeforeevent'],                       name, from, to, args); },\n    afterAnyEvent:   function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onafterevent'] || fsm['onevent'],      name, from, to, args); },\n    leaveAnyState:   function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onleavestate'],                        name, from, to, args); },\n    enterAnyState:   function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onenterstate'] || fsm['onstate'],      name, from, to, args); },\n    changeState:     function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onchangestate'],                       name, from, to, args); },\n\n    beforeThisEvent: function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onbefore' + name],                     name, from, to, args); },\n    afterThisEvent:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onafter'  + name] || fsm['on' + name], name, from, to, args); },\n    leaveThisState:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onleave'  + from],                     name, from, to, args); },\n    enterThisState:  function(fsm, name, from, to, args) { return StateMachine.doCallback(fsm, fsm['onenter'  + to]   || fsm['on' + to],   name, from, to, args); },\n\n    beforeEvent: function(fsm, name, from, to, args) {\n      if ((false === StateMachine.beforeThisEvent(fsm, name, from, to, args)) ||\n          (false === StateMachine.beforeAnyEvent( fsm, name, from, to, args)))\n        return false;\n    },\n\n    afterEvent: function(fsm, name, from, to, args) {\n      StateMachine.afterThisEvent(fsm, name, from, to, args);\n      StateMachine.afterAnyEvent( fsm, name, from, to, args);\n    },\n\n    leaveState: function(fsm, name, from, to, args) {\n      var specific = StateMachine.leaveThisState(fsm, name, from, to, args),\n          general  = StateMachine.leaveAnyState( fsm, name, from, to, args);\n      if ((false === specific) || (false === general))\n        return false;\n      else if ((StateMachine.ASYNC === specific) || (StateMachine.ASYNC === general))\n        return StateMachine.ASYNC;\n    },\n\n    enterState: function(fsm, name, from, to, args) {\n      StateMachine.enterThisState(fsm, name, from, to, args);\n      StateMachine.enterAnyState( fsm, name, from, to, args);\n    },\n\n    //===========================================================================\n\n    buildEvent: function(name, map) {\n      return function() {\n\n        var from  = this.current;\n        var to    = map[from] || (map[StateMachine.WILDCARD] != StateMachine.WILDCARD ? map[StateMachine.WILDCARD] : from) || from;\n        var args  = Array.prototype.slice.call(arguments); // turn arguments into pure array\n\n        if (this.transition)\n          return this.error(name, from, to, args, StateMachine.Error.PENDING_TRANSITION, \"event \" + name + \" inappropriate because previous transition did not complete\");\n\n        if (this.cannot(name))\n          return this.error(name, from, to, args, StateMachine.Error.INVALID_TRANSITION, \"event \" + name + \" inappropriate in current state \" + this.current);\n\n        if (false === StateMachine.beforeEvent(this, name, from, to, args))\n          return StateMachine.Result.CANCELLED;\n\n        if (from === to) {\n          StateMachine.afterEvent(this, name, from, to, args);\n          return StateMachine.Result.NOTRANSITION;\n        }\n\n        // prepare a transition method for use EITHER lower down, or by caller if they want an async transition (indicated by an ASYNC return value from leaveState)\n        var fsm = this;\n        this.transition = function() {\n          fsm.transition = null; // this method should only ever be called once\n          fsm.current = to;\n          StateMachine.enterState( fsm, name, from, to, args);\n          StateMachine.changeState(fsm, name, from, to, args);\n          StateMachine.afterEvent( fsm, name, from, to, args);\n          return StateMachine.Result.SUCCEEDED;\n        };\n        this.transition.cancel = function() { // provide a way for caller to cancel async transition if desired (issue #22)\n          fsm.transition = null;\n          StateMachine.afterEvent(fsm, name, from, to, args);\n        }\n\n        var leave = StateMachine.leaveState(this, name, from, to, args);\n        if (false === leave) {\n          this.transition = null;\n          return StateMachine.Result.CANCELLED;\n        }\n        else if (StateMachine.ASYNC === leave) {\n          return StateMachine.Result.PENDING;\n        }\n        else {\n          if (this.transition) // need to check in case user manually called transition() but forgot to return StateMachine.ASYNC\n            return this.transition();\n        }\n\n      };\n    }\n\n  }; // StateMachine\n\n  //===========================================================================\n\n  //======\n  // NODE\n  //======\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = StateMachine;\n    }\n    exports.StateMachine = StateMachine;\n  }\n  //============\n  // AMD/REQUIRE\n  //============\n  else if (typeof define === 'function' && define.amd) {\n    define(function(require) { return StateMachine; });\n  }\n  //========\n  // BROWSER\n  //========\n  else if (typeof window !== 'undefined') {\n    window.StateMachine = StateMachine;\n  }\n  //===========\n  // WEB WORKER\n  //===========\n  else if (typeof self !== 'undefined') {\n    self.StateMachine = StateMachine;\n  }\n\n}());\n","/**\n * @module inherit\n * @version 2.2.7\n * @author Filatov Dmitry <dfilatov@yandex-team.ru>\n * @description This module provides some syntax sugar for \"class\" declarations, constructors, mixins, \"super\" calls and static members.\n */\n\n(function(global) {\n\nvar noop = function() {},\n    hasOwnProperty = Object.prototype.hasOwnProperty,\n    objCreate = Object.create || function(ptp) {\n        var inheritance = function() {};\n        inheritance.prototype = ptp;\n        return new inheritance();\n    },\n    objKeys = Object.keys || function(obj) {\n        var res = [];\n        for(var i in obj) {\n            hasOwnProperty.call(obj, i) && res.push(i);\n        }\n        return res;\n    },\n    extend = function(o1, o2) {\n        for(var i in o2) {\n            hasOwnProperty.call(o2, i) && (o1[i] = o2[i]);\n        }\n\n        return o1;\n    },\n    extendStatic = Object.setPrototypeOf || extend,\n    toStr = Object.prototype.toString,\n    isArray = Array.isArray || function(obj) {\n        return toStr.call(obj) === '[object Array]';\n    },\n    isFunction = function(obj) {\n        return toStr.call(obj) === '[object Function]';\n    },\n    needCheckProps = true,\n    testPropObj = { toString : '' };\n\nfor(var i in testPropObj) { // It's a pity ie hasn't toString, valueOf in for\n    testPropObj.hasOwnProperty(i) && (needCheckProps = false);\n}\n\nvar specProps = needCheckProps? ['toString', 'valueOf'] : null;\n\nfunction getPropList(obj) {\n    var res = objKeys(obj);\n    if(needCheckProps) {\n        var specProp, i = 0;\n        while(specProp = specProps[i++]) {\n            obj.hasOwnProperty(specProp) && res.push(specProp);\n        }\n    }\n\n    return res;\n}\n\nfunction override(base, res, add) {\n    var addList = getPropList(add),\n        j = 0, len = addList.length,\n        name, prop;\n    while(j < len) {\n        if((name = addList[j++]) === '__self') {\n            continue;\n        }\n        prop = add[name];\n        if(isFunction(prop) &&\n                (!prop.prototype || !prop.prototype.__self) && // check to prevent wrapping of \"class\" functions\n                (prop.toString().indexOf('.__base') > -1)) {\n            res[name] = (function(name, prop) {\n                var baseMethod = base[name]?\n                        base[name] :\n                        name === '__constructor'? // case of inheritance from plain function\n                            res.__self.__parent :\n                            noop,\n                    result = function() {\n                        var baseSaved = this.__base;\n\n                        this.__base = result.__base;\n                        var res = prop.apply(this, arguments);\n                        this.__base = baseSaved;\n\n                        return res;\n                    };\n                result.__base = baseMethod;\n\n                return result;\n            })(name, prop);\n        } else {\n            res[name] = prop;\n        }\n    }\n}\n\nfunction applyMixins(mixins, res) {\n    var i = 1, mixin;\n    while(mixin = mixins[i++]) {\n        res?\n            isFunction(mixin)?\n                inherit.self(res, mixin.prototype, mixin) :\n                inherit.self(res, mixin) :\n            res = isFunction(mixin)?\n                inherit(mixins[0], mixin.prototype, mixin) :\n                inherit(mixins[0], mixin);\n    }\n    return res || mixins[0];\n}\n\n/**\n* Creates class\n* @exports\n* @param {Function|Array} [baseClass|baseClassAndMixins] class (or class and mixins) to inherit from\n* @param {Object} prototypeFields\n* @param {Object} [staticFields]\n* @returns {Function} class\n*/\nfunction inherit() {\n    var args = arguments,\n        withMixins = isArray(args[0]),\n        hasBase = withMixins || isFunction(args[0]),\n        base = hasBase? withMixins? applyMixins(args[0]) : args[0] : noop,\n        props = args[hasBase? 1 : 0] || {},\n        staticProps = args[hasBase? 2 : 1],\n        res = props.__constructor || (hasBase && base.prototype && base.prototype.__constructor)?\n            function() {\n                return this.__constructor.apply(this, arguments);\n            } :\n            hasBase?\n                function() {\n                    return base.apply(this, arguments);\n                } :\n                function() {};\n\n    if(!hasBase) {\n        res.prototype = props;\n        res.prototype.__self = res.prototype.constructor = res;\n        return extend(res, staticProps);\n    }\n\n    extendStatic(res, base);\n\n    res.__parent = base;\n\n    var basePtp = base.prototype,\n        resPtp = res.prototype = objCreate(basePtp);\n\n    resPtp.__self = resPtp.constructor = res;\n\n    props && override(basePtp, resPtp, props);\n    staticProps && override(base, res, staticProps);\n\n    return res;\n}\n\ninherit.self = function() {\n    var args = arguments,\n        withMixins = isArray(args[0]),\n        base = withMixins? applyMixins(args[0], args[0][0]) : args[0],\n        props = args[1],\n        staticProps = args[2],\n        basePtp = base.prototype;\n\n    props && override(basePtp, basePtp, props);\n    staticProps && override(base, base, staticProps);\n\n    return base;\n};\n\nvar defineAsGlobal = true;\n/* istanbul ignore next */\nif(typeof exports === 'object') {\n    module.exports = inherit;\n    defineAsGlobal = false;\n}\n/* istanbul ignore next */\nif(typeof modules === 'object' && typeof modules.define === 'function') {\n    modules.define('inherit', function(provide) {\n        provide(inherit);\n    });\n    defineAsGlobal = false;\n}\n/* istanbul ignore next */\nif(typeof define === 'function') {\n    define(function(require, exports, module) {\n        module.exports = inherit;\n    });\n    defineAsGlobal = false;\n}\n/* istanbul ignore next */\ndefineAsGlobal && (global.inherit = inherit);\n\n})(this);\n","/* eslint-disable import/no-unresolved */\nimport { TypedMessage } from 'leancloud-realtime';\n\nif (!TypedMessage) {\n  throw new Error('LeanCloud Realtime SDK not installed');\n}\n\nexport { TypedMessage, messageType, messageField } from 'leancloud-realtime';\n","import inherit from 'inherit';\nimport { TypedMessage, messageField } from '../realtime';\n\n// use dynamic class inherit helper instead of ES class syntex\n// to prevent TypedMessage from being included in the bundler\nconst Signaling = inherit(TypedMessage, {\n  __constructor(payload) {\n    this.__base();\n    this.payload = payload;\n  },\n});\nSignaling.sendOptions = {\n  transient: true,\n};\n\nmessageField('payload')(Signaling);\n\nexport { Signaling as default };\n","import Signaling from './signaling';\nimport { messageType } from '../realtime';\n\n@messageType(-102)\nexport default class Answer extends Signaling {}\n","import Signaling from './signaling';\nimport { messageType } from '../realtime';\n\n@messageType(-103)\nexport default class ICECandidate extends Signaling {}\n","import Signaling from './signaling';\nimport { messageType } from '../realtime';\n\n@messageType(-104)\nexport default class Refusal extends Signaling {}\n","import Signaling from './signaling';\nimport { messageType } from '../realtime';\n\n@messageType(-105)\nexport default class Cancelation extends Signaling {}\n","import EventEmitter from 'eventemitter3';\nimport createCallStateMachine from './call-state-machine';\nimport Answer from '../signalings/answer';\nimport ICECandidate from '../signalings/ice-candidate';\nimport Refusal from '../signalings/refusal';\nimport Cancelation from '../signalings/cancelation';\n\nexport default class Call extends EventEmitter {\n  /**\n   * {@link IncomingCall} 与 {@link OutgoingCall} 的基类\n   * @abstract\n   */\n  constructor(conversation, RTCConfiguration) {\n    super();\n    this._setConversation(conversation);\n    this._peerConnection = this._createPeerConnection(RTCConfiguration);\n    this._call = createCallStateMachine();\n    this._promises = {};\n    const streamReady = new Promise(resolve => {\n      this._promises.resolveStreamReady = resolve;\n    });\n    const accept = new Promise(resolve => {\n      this._promises.resolveAccept = resolve;\n    });\n    Promise.all([streamReady, accept]).then(([stream]) => {\n      if (this._call.can('connect')) {\n        this._call.connect();\n        /**\n         * 通话连接成功\n         * @event Call#connect\n         * @param {MediaStream} stram 对方的媒体流\n         */\n        this.emit('connect', stream);\n      }\n    });\n  }\n\n  /**\n   * 当前通话状态\n   * （<code>calling</code>, <code>connected</code>, <code>closed</code>,\n   * <code>refused</code>, <code>canceled</code>）\n   * @type {string}\n   * @readonly\n   */\n  get state() {\n    return this._call.current;\n  }\n\n  /**\n   * 结束通话\n   * @return {Promise}\n   */\n  close() {\n    return Promise.resolve().then(() => {\n      this._call.close();\n      this._destroyPeerConnection();\n      this._peerConnection.close();\n      this._destroy();\n    });\n  }\n\n  _handleCloseEvent() {\n    if (this._call.can('close')) {\n      this.close();\n      /**\n       * 通话结束，可能是对方挂断或网络中断\n       * @event Call#close\n       */\n      this.emit('close');\n    }\n  }\n\n  _setConversation(conversation) {\n    if (this._conversation) {\n      this._conversation.off('message');\n    }\n    if (conversation) {\n      this._conversation = conversation;\n      conversation.on('message', this._handleMessage.bind(this));\n    }\n  }\n\n  _destroy() {\n    this._conversation.off('message');\n  }\n\n  _createPeerConnection(RTCConfiguration) {\n    const connection = new RTCPeerConnection(RTCConfiguration);\n    connection.onicecandidate = this._handleICECandidateEvent.bind(this);\n    connection.onaddstream = this._handleAddStreamEvent.bind(this);\n    connection.onnremovestream = this._handleRemoveStreamEvent.bind(this);\n    connection.oniceconnectionstatechange = this._handleICEConnectionStateChangeEvent.bind(\n      this\n    );\n    connection.onsignalingstatechange = this._handleSignalingStateChangeEvent.bind(\n      this\n    );\n    return connection;\n  }\n\n  _destroyPeerConnection() {\n    const connection = this._peerConnection;\n    delete connection.onaddstream;\n    delete connection.onremovestream;\n    delete connection.onnicecandidate;\n    delete connection.oniceconnectionstatechange;\n    delete connection.onsignalingstatechange;\n  }\n\n  _handleMessage(message) {\n    if (message instanceof Answer) {\n      return this._handleAnswer(message);\n    }\n    if (message instanceof Refusal) {\n      return this._handleRefusal();\n    }\n    if (message instanceof Cancelation) {\n      return this._handleCancelation();\n    }\n    if (message instanceof ICECandidate) {\n      return this._handleICECandidate(message);\n    }\n    return false;\n  }\n\n  _handleICECandidate(message) {\n    const candidate = new RTCIceCandidate(message.payload);\n    if (this._peerConnection) {\n      this._peerConnection\n        .addIceCandidate(candidate)\n        .catch(console.error.bind(console));\n    }\n  }\n\n  _handleICECandidateEvent(event) {\n    if (event.candidate && this._conversation) {\n      return this._conversation\n        .send(new ICECandidate(event.candidate))\n        .catch(console.error.bind(console));\n    }\n    return false;\n  }\n\n  _handleAddStreamEvent(event) {\n    this._promises.resolveStreamReady(event.stream);\n  }\n\n  _handleRemoveStreamEvent() {\n    this._handleCloseEvent();\n  }\n\n  _handleICEConnectionStateChangeEvent() {\n    switch (this._peerConnection.iceConnectionState) {\n      case 'closed':\n      case 'failed':\n      case 'disconnected':\n        this._handleCloseEvent();\n        break;\n      default:\n    }\n  }\n\n  _handleSignalingStateChangeEvent() {\n    switch (this._peerConnection.signalingState) {\n      case 'closed':\n        this._handleCloseEvent();\n        break;\n      default:\n    }\n  }\n\n  /* eslint-disable class-methods-use-this */\n  _handleAnswer() {\n    throw new Error('not implemented');\n  }\n\n  _handleRefusal() {\n    throw new Error('not implemented');\n  }\n\n  _handleCancelation() {\n    throw new Error('not implemented');\n  }\n  /* eslint-enable class-methods-use-this */\n}\n","import StateMachine from 'javascript-state-machine';\n\nexport default () =>\n  StateMachine.create({\n    initial: 'calling',\n    events: [\n      {\n        name: 'connect',\n        from: 'calling',\n        to: 'connected',\n      },\n      {\n        name: 'close',\n        from: 'connected',\n        to: 'closed',\n      },\n      {\n        name: 'cancel',\n        from: 'calling',\n        to: 'canceled',\n      },\n      {\n        name: 'refuse',\n        from: 'calling',\n        to: 'refused',\n      },\n    ],\n  });\n","import Call from './call';\nimport Cancelation from '../signalings/cancelation';\n\nexport default class OutgoingCall extends Call {\n  /**\n   * 呼出的通话\n   * @extends Call\n   */\n  constructor(to, conversation, RTCConfiguration) {\n    super(conversation, RTCConfiguration);\n    /**\n     * 呼叫目标 id\n     * @type {string}\n     */\n    this.to = to;\n  }\n\n  _handleAnswer(answer) {\n    const desc = new RTCSessionDescription(answer.payload);\n    this._peerConnection.setRemoteDescription(desc);\n    this._promises.resolveAccept();\n  }\n\n  _handleRefusal() {\n    this._destroyPeerConnection();\n    this._call.refuse();\n    /**\n     * 呼叫被对方拒绝\n     * @event OutgoingCall#refuse\n     */\n    this.emit('refuse');\n    this._destroy();\n  }\n\n  /**\n   * 取消该次呼叫\n   * @return {Promise}\n   */\n  cancel() {\n    this._call.cancel();\n    return this._conversation\n      .send(new Cancelation())\n      .then(() => this._destroy());\n  }\n\n  /**\n   * 结束通话，如果在 <code>calling</code> 状态，则取消该次呼叫\n   * @return {Promise}\n   */\n  close() {\n    if (this._call.can('cancel')) {\n      return this.cancel();\n    }\n    return super.close();\n  }\n}\n","import Call from './call';\nimport Answer from '../signalings/answer';\nimport Refusal from '../signalings/refusal';\n\nexport default class IncomingCall extends Call {\n  /**\n   * 呼入的通话\n   * @extends Call\n   */\n  constructor(offer, conversation, RTCConfiguration) {\n    super(conversation, RTCConfiguration);\n    /**\n     * 呼叫者 id\n     * @type {string}\n     */\n    this.from = offer.from;\n    const desc = new RTCSessionDescription(offer.payload);\n    this._handleOfferPromise = this._peerConnection.setRemoteDescription(desc);\n  }\n\n  /**\n   * 接受该呼入通话\n   * @param  {MediaStream} stream 本地流媒体，参见 {@link https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API MediaStream}\n   * @return {Promise}\n   */\n  accept(stream) {\n    if (!stream) {\n      throw new TypeError(\n        'a MediaStream instance is required to accept a call'\n      );\n    }\n    return this._handleOfferPromise\n      .then(() => this._peerConnection.addStream(stream))\n      .then(() => this._peerConnection.createAnswer())\n      .then(answer => this._peerConnection.setLocalDescription(answer))\n      .then(() =>\n        this._conversation.send(\n          new Answer(this._peerConnection.localDescription)\n        )\n      )\n      .then(() => this._promises.resolveAccept());\n  }\n\n  /**\n   * 拒绝该呼入通话\n   * @return {Promise}\n   */\n  refuse() {\n    return this._conversation.send(new Refusal()).then(() => {\n      this._call.refuse();\n      this._destroy();\n    });\n  }\n\n  _handleCancelation() {\n    this._call.cancel();\n    /**\n     * 呼叫被对方取消\n     * @event IncomingCall#cancel\n     */\n    this.emit('cancel');\n    this._destroy();\n  }\n}\n","import Signaling from './signaling';\nimport { messageType } from '../realtime';\n\n@messageType(-101)\nexport default class Offer extends Signaling {}\n","import EventEmitter from 'eventemitter3';\nimport OutgoingCall from './call/outgoing-call';\nimport IncomingCall from './call/incoming-call';\nimport Offer from './signalings/offer';\n\nconst DEFAULT_RTCCONF = {\n  iceServers: [\n    {\n      urls: [\n        'stun:stun.l.google.com:19302',\n        'stun:stun1.l.google.com:19302',\n        'stun:stun2.l.google.com:19302',\n        'stun:stun3.l.google.com:19302',\n        'stun:stun4.l.google.com:19302',\n        'stun:stun.ekiga.net',\n        'stun:stun.ideasip.com',\n        'stun:stun.rixtelecom.se',\n        'stun:stun.schlund.de',\n        'stun:stun.stunprotocol.org:3478',\n        'stun:stun.voiparound.com',\n        'stun:stun.voipbuster.com',\n        'stun:stun.voipstunt.com',\n        'stun:stun.voxgratia.org',\n      ],\n    },\n  ],\n};\n\nexport default class WebRTCClient extends EventEmitter {\n  /**\n   * 无法直接实例化，请使用 {@link createWebRTCClient Realtime#createWebRTCClient} 创建新的 WebRTCClient\n   */\n  constructor(id, options) {\n    if (typeof id !== 'string') {\n      throw new TypeError('id is not a string');\n    }\n    super();\n    /** @type {string} */\n    this.id = id;\n    this.options = {\n      RTCConfiguration: DEFAULT_RTCCONF,\n      ...options,\n    };\n  }\n\n  _open(realtime, clientOptions) {\n    return realtime\n      .createIMClient(this.id, clientOptions, 'webrtc')\n      .then(imClient => {\n        this._imClient = imClient;\n        this.id = imClient.id;\n        imClient.on('message', (message, conversation) => {\n          if (message instanceof Offer) {\n            return this._handleOffer(message, conversation);\n          }\n          return false;\n        });\n        /**\n         * 用户在其他客户端登录，当前客户端被服务端强行下线。详见文档「单点登录」章节。\n         * @event WebRTCClient#conflict\n         */\n        imClient.on('conflict', (...payload) =>\n          this.emit('conflict', ...payload)\n        );\n        return this;\n      });\n  }\n\n  /**\n   * 关闭客户端\n   * @return {Promise}\n   */\n  close() {\n    return this._imClient.close();\n  }\n\n  /**\n   * 呼叫另一个用户\n   * @param  {string} targetId 用户 ID\n   * @param  {MediaStream} stream 本地流媒体，参见 {@link https://developer.mozilla.org/en-US/docs/Web/API/Media_Streams_API MediaStream}\n   * @return {Promise.<OutgoingCall>} 呼出通话\n   */\n  call(targetId, stream) {\n    if (typeof targetId !== 'string') {\n      throw new TypeError('target id is not a string');\n    }\n    if (!stream) {\n      throw new TypeError('a MediaStream instance is required to make a call');\n    }\n    return this._imClient.ping([targetId]).then(onlineClients => {\n      if (!onlineClients.length) {\n        throw new Error(`Call failed as ${targetId} is not online`);\n      }\n      const outgoingCall = new OutgoingCall(\n        targetId,\n        null,\n        this.options.RTCConfiguration\n      );\n      const promise = new Promise(resolve => {\n        outgoingCall._peerConnection.onnegotiationneeded = resolve;\n      });\n      outgoingCall._peerConnection.addStream(stream);\n      return promise\n        .then(() =>\n          Promise.all([\n            this._imClient.createConversation({\n              members: [targetId],\n              unique: true,\n            }),\n            outgoingCall._peerConnection\n              .createOffer()\n              .then(localDescription => {\n                outgoingCall._peerConnection.setLocalDescription(\n                  localDescription\n                );\n              }),\n          ])\n        )\n        .then(([conversation]) => {\n          outgoingCall._setConversation(conversation);\n          return conversation.send(\n            new Offer(outgoingCall._peerConnection.localDescription)\n          );\n        })\n        .then(() => outgoingCall);\n    });\n  }\n\n  _handleOffer(offer, conversation) {\n    const incomingCall = new IncomingCall(\n      offer,\n      conversation,\n      this.options.RTCConfiguration\n    );\n    /**\n     * 收到其他用户的呼叫\n     * @event WebRTCClient#call\n     * @param {incomingCall} incomingCall 呼入通话\n     */\n    this.emit('call', incomingCall);\n  }\n}\n","/* eslint-disable import/prefer-default-export */\n/** @module leancloud-realtime-plugin-webrtc */\nimport WebRTCClient from './webrtc-client';\nimport Offer from './signalings/offer';\nimport Answer from './signalings/answer';\nimport ICECandidate from './signalings/ice-candidate';\nimport Refusal from './signalings/refusal';\nimport Cancelation from './signalings/cancelation';\nimport { name } from '../package.json';\n\nconst messageClasses = [Offer, Answer, ICECandidate, Refusal, Cancelation];\n\nconst onRealtimeCreate = realtime => {\n  /**\n   * 创建一个 WebRTC 客户端，多次创建相同 id 的客户端会返回同一个实例。应用 WebRTC 插件后，Realtime 类会增加该实例方法。\n   * WebRTC 客户端是单点登录的，既在同一时刻，同一个 id 只允许一个客户端在线，后登录的客户端会将原来在线上的客户端踢下线。\n   * @function createWebRTCClient\n   * @global\n   * @param  {String} id 客户端 id\n   * @param  {Object} [clientOptions] 详细参数 @see {@link IMClient}\n   * @param  {Object} [clientOptions.RTCConfiguration] @see {@link https://developer.mozilla.org/en-US/docs/Web/API/RTCConfiguration RTCConfiguration}\n   * @return {Promise.<WebRTCClient>}\n   */\n  // eslint-disable-next-line no-param-reassign\n  realtime.createWebRTCClient = (id, clientOptions) =>\n    new WebRTCClient(id)._open(realtime, clientOptions);\n};\n\n/**\n * WebRTC 插件，使用后可通过 {@link createWebRTCClient Realtime#createWebRTCClient}\n * 创建 {@link WebRTCClient} 实现音视频通话\n * @example\n * var realtime = new Realtime({\n *   appId: appId,\n *   appKey: appKey,\n *   server: server,\n *   plugins: WebRTCPlugin,\n * });\n * realtime.createWebRTCClient(id);\n */\nexport const WebRTCPlugin = {\n  name,\n  messageClasses,\n  onRealtimeCreate,\n};\n\n/**\n * 当前浏览器是否支持 WebRTC 的标记\n * @type {Boolean}\n */\nexport const isWebRTCSupported = !!(\n  window.RTCPeerConnection &&\n  window.RTCSessionDescription &&\n  window.RTCIceCandidate\n);\n"],"names":["module","arr","Array","isArray","exports","i","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","call","next","Object","done","push","value","length","err","len","arr2","o","minLen","arrayLikeToArray","n","prototype","toString","slice","constructor","name","from","test","TypeError","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","_typeof","obj","require$$0","input","hint","prim","toPrimitive","undefined","res","String","Number","arg","key","toPropertyKey","defineProperty","enumerable","configurable","writable","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","subClass","superClass","create","has","hasOwnProperty","prefix","Events","EE","fn","context","once","this","addListener","emitter","event","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","eventNames","events","names","getOwnPropertySymbols","concat","listeners","handlers","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","args","arguments","removeListener","apply","j","on","removeAllListeners","off","prefixed","_defineProperties","target","props","descriptor","Constructor","protoProps","staticProps","StateMachine","VERSION","Result","SUCCEEDED","NOTRANSITION","CANCELLED","PENDING","Error","INVALID_TRANSITION","PENDING_TRANSITION","INVALID_CALLBACK","WILDCARD","ASYNC","cfg","initial","state","terminal","fsm","callbacks","map","transitions","add","e","to","buildEvent","current","is","indexOf","can","transition","cannot","isFinished","error","msg","states","keys","sort","defer","doCallback","func","beforeAnyEvent","afterAnyEvent","leaveAnyState","enterAnyState","changeState","beforeThisEvent","afterThisEvent","leaveThisState","enterThisState","beforeEvent","afterEvent","leaveState","specific","general","enterState","cancel","leave","global","noop","objCreate","ptp","inheritance","objKeys","extend","o1","o2","extendStatic","toStr","isFunction","needCheckProps","testPropObj","specProps","override","base","prop","addList","specProp","getPropList","__self","baseMethod","__parent","result","baseSaved","__base","applyMixins","mixins","mixin","inherit","self","withMixins","hasBase","__constructor","basePtp","resPtp","defineAsGlobal","modules","define","provide","TypedMessage","Signaling","payload","sendOptions","transient","Answer","messageType","_dec","_class","_Signaling","_inheritsLoose","ICECandidate","Refusal","Cancelation","Call","_EventEmitter","conversation","RTCConfiguration","_this","_setConversation","_peerConnection","_createPeerConnection","_call","_promises","streamReady","Promise","resolve","resolveStreamReady","accept","resolveAccept","all","then","_ref","stream","_slicedToArray","connect","_proto","close","_this2","_destroyPeerConnection","_destroy","_handleCloseEvent","_conversation","_handleMessage","connection","RTCPeerConnection","onicecandidate","_handleICECandidateEvent","onaddstream","_handleAddStreamEvent","onnremovestream","_handleRemoveStreamEvent","oniceconnectionstatechange","_handleICEConnectionStateChangeEvent","onsignalingstatechange","_handleSignalingStateChangeEvent","onremovestream","onnicecandidate","message","_handleAnswer","_handleRefusal","_handleCancelation","_handleICECandidate","candidate","RTCIceCandidate","addIceCandidate","console","send","iceConnectionState","signalingState","_createClass","get","OutgoingCall","_Call","answer","desc","RTCSessionDescription","setRemoteDescription","refuse","IncomingCall","offer","_handleOfferPromise","addStream","createAnswer","setLocalDescription","localDescription","_this3","Offer","DEFAULT_RTCCONF","iceServers","urls","WebRTCClient","id","options","_objectSpread","_open","realtime","clientOptions","createIMClient","imClient","_imClient","_handleOffer","_len","_key","targetId","ping","onlineClients","outgoingCall","promise","onnegotiationneeded","createConversation","members","unique","createOffer","incomingCall","WebRTCPlugin","messageClasses","onRealtimeCreate","createWebRTCClient","isWebRTCSupported","window"],"mappings":"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"}